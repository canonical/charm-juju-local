[tox]
skipsdist=True
envlist = functional
skip_missing_interpreters = True

[testenv]
basepython = python3
setenv =
  PYTHONPATH = .

[testenv:functional]
commands =
    functest-run-suite --keep-model
deps = -r{toxinidir}/test-requirements.txt
passenv =
  HOME
  JUJU_REPOSITORY

[testenv:func-smoke]
commands =
    functest-run-suite --keep-model --smoke
deps = -r{toxinidir}/test-requirements.txt
passenv =
  HOME
  JUJU_REPOSITORY

[testenv:lint]
commands =
    black --check reactive lib tests
    flake8
deps =
    black
    flake8
    flake8-import-order
    flake8-colors
    pep8-naming

[flake8]
max-line-length = 120
max-complexity = 10
import-order-style = google
application_import_names = lib_charm_autoreg
ignore = W503
exclude =
    .git,
    __pycache__,
    .tox,
    charm-userdir-ldap,
